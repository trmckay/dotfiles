#!usr/bin/zsh

function tgz {
    tar cf - $2 | pigz > $1
}

function ta {
    SESSION=$(tmux ls | fzf | cut -d':' -f1)

    if [[ -v SESSION ]]; then
        tmux attach-session -t $SESSION
    fi
}

function tn {
    if [ "$1" ]; then
        tmux new-session -A -s "$@"
    else
        tmux new-session -A -s "$(basename $(pwd))"
    fi
}

function peek() {
    if [ -d $1 ]; then
        ls $1
    else
        less $1
    fi
}

function waitfor {
    while [ "$(pgrep $1)" ]; do
        sleep 5;
    done
}

function create {
    FILE="$1"
    DIR="$(dirname $1)"
    mkdir -p "$DIR"
    touch "$FILE"
    nvim "$FILE"
}

codi() {
  local syntax="${1:-python}"
  shift
  echo -e "import math\n\n" |\
  vim -c \
    "let g:startify_disable_at_vimenter = 1 |\
    set bt=nofile ls=0 noru nonu nornu |\
    hi ColorColumn ctermbg=NONE |\
    hi VertSplit ctermbg=NONE |\
    hi NonText ctermfg=0 |\
    Codi $syntax |\
    Eof" "$@"
}
